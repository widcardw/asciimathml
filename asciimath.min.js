var asciimath;!function(){const m=asciimath={katexpath:"katex.min.js",onload:()=>f(document.body),fixepsi:!0,fixphi:!0,delim1:"`",displaystyle:!0,viewsource:!1,...asciimath||{},define:[[/dx/g,'{:"d"x:}'],[/dy/g,'{:"d"y:}'],[/dz/g,'{:"d"z:}'],[/dt/g,'{:"d"t:}'],[/√/g,"sqrt"],[/part(\^\S*)?\s+(\S+)\s+(\([^)]*\)|\S+)/g,(t,e,u,p)=>`(del${e=e||""} ${u})/(del ${p="("===p[0]?p.slice(1,-1).split(/\s+/).join(" del "):p})`],...asciimath&&asciimath.define||[]],names:{},str:void 0,begin:void 0},o=[{input:"alpha",tag:"mi",output:"α",ttype:0},{input:"beta",tag:"mi",output:"β",ttype:0},{input:"gamma",tag:"mi",output:"γ",ttype:0},{input:"Gamma",tag:"mo",output:"Γ",ttype:0},{input:"delta",tag:"mi",output:"δ",ttype:0},{input:"Delta",tag:"mtext",output:"Δ",ttype:0},{input:"epsi",tag:"mi",output:m.fixepsi?"ε":"ϵ",tex:m.fixepsi?"varepsilon":"epsilon",ttype:0,notexcopy:!0},{input:"epsilon",tag:"mi",output:m.fixepsi?"ε":"ϵ",tex:m.fixepsi?"varepsilon":"epsilon",ttype:0,notexcopy:!0},{input:"varepsilon",tag:"mi",output:m.fixepsi?"ϵ":"ε",tex:m.fixepsi?"epsilon":"varepsilon",ttype:0,notexcopy:!0},{input:"zeta",tag:"mi",output:"ζ",ttype:0},{input:"eta",tag:"mi",output:"η",ttype:0},{input:"theta",tag:"mi",output:"θ",ttype:0},{input:"Theta",tag:"mo",output:"Θ",ttype:0},{input:"vartheta",tag:"mi",output:"ϑ",ttype:0},{input:"iota",tag:"mi",output:"ι",ttype:0},{input:"kappa",tag:"mi",output:"κ",ttype:0},{input:"lambda",tag:"mi",output:"λ",ttype:0},{input:"Lambda",tag:"mo",output:"Λ",ttype:0},{input:"mu",tag:"mi",output:"μ",ttype:0},{input:"nu",tag:"mi",output:"ν",ttype:0},{input:"xi",tag:"mi",output:"ξ",ttype:0},{input:"Xi",tag:"mo",output:"Ξ",ttype:0},{input:"pi",tag:"mi",output:"π",ttype:0},{input:"Pi",tag:"mo",output:"Π",ttype:0},{input:"rho",tag:"mi",output:"ρ",ttype:0},{input:"sigma",tag:"mi",output:"σ",ttype:0},{input:"Sigma",tag:"mo",output:"Σ",ttype:0},{input:"tau",tag:"mi",output:"τ",ttype:0},{input:"upsilon",tag:"mi",output:"υ",ttype:0},{input:"phi",tag:"mi",output:m.fixphi?"ϕ":"φ",tex:m.fixphi?"phi":"varphi",ttype:0,notexcopy:!0},{input:"varphi",tag:"mi",output:m.fixphi?"φ":"ϕ",tex:m.fixphi?"varphi":"phi",ttype:0,notexcopy:!0},{input:"Phi",tag:"mo",output:"Φ",ttype:0},{input:"chi",tag:"mi",output:"χ",ttype:0},{input:"psi",tag:"mi",output:"ψ",ttype:0},{input:"Psi",tag:"mi",output:"Ψ",ttype:0},{input:"omega",tag:"mi",output:"ω",ttype:0},{input:"Omega",tag:"mo",output:"Ω",ttype:0},{input:"*",tag:"mo",output:"⋅",tex:"cdot",ttype:0},{input:"**",tag:"mo",output:"∗",tex:"ast",ttype:0},{input:"***",tag:"mo",output:"⋆",tex:"star",ttype:0},{input:"//",tag:"mo",output:"/",tex:"{/}",ttype:0,nobackslash:!0},{input:"\\\\",tag:"mo",output:"\\",tex:"backslash",ttype:0},{input:"setminus",tag:"mo",output:"\\",ttype:0},{input:"xx",tag:"mo",output:"×",tex:"times",ttype:0},{input:"|><",tag:"mo",output:"⋉",tex:"ltimes",ttype:0},{input:"><|",tag:"mo",output:"⋊",tex:"rtimes",ttype:0},{input:"|><|",tag:"mo",output:"⋈",tex:"bowtie",ttype:0},{input:"-:",tag:"mo",output:"÷",tex:"div",ttype:0},{input:"@",tag:"mo",output:"∘",tex:"circ",ttype:0},{input:"o+",tag:"mo",output:"⊕",tex:"oplus",ttype:0},{input:"ox",tag:"mo",output:"⊗",tex:"otimes",ttype:0},{input:"o.",tag:"mo",output:"⊙",tex:"odot",ttype:0},{input:"sum",tag:"mo",output:"∑",ttype:7},{input:"prod",tag:"mo",output:"∏",ttype:7},{input:"^^",tag:"mo",output:"∧",tex:"wedge",ttype:0},{input:"^^^",tag:"mo",output:"⋀",tex:"bigwedge",ttype:7},{input:"vv",tag:"mo",output:"∨",tex:"vee",ttype:0},{input:"vvv",tag:"mo",output:"⋁",tex:"bigvee",ttype:7},{input:"nn",tag:"mo",output:"∩",tex:"cap",ttype:0},{input:"nnn",tag:"mo",output:"⋂",tex:"bigcap",ttype:7},{input:"uu",tag:"mo",output:"∪",tex:"cup",ttype:0},{input:"uuu",tag:"mo",output:"⋃",tex:"bigcup",ttype:7},{input:"!=",tag:"mo",output:"≠",tex:"ne",ttype:0},{input:":=",tag:"mo",output:":=",ttype:0,nobackslash:!0},{input:"lt",tag:"mo",output:"<",ttype:0},{input:"<=",tag:"mo",output:"≤",tex:"le",ttype:0},{input:"lt=",tag:"mo",output:"≤",tex:"leq",ttype:0},{input:"gt",tag:"mo",output:">",ttype:0},{input:">=",tag:"mo",output:"≥",tex:"ge",ttype:0},{input:"gt=",tag:"mo",output:"≥",tex:"geq",ttype:0},{input:"-<",tag:"mo",output:"≺",tex:"prec",ttype:0},{input:"-lt",tag:"mo",output:"≺",ttype:0},{input:">-",tag:"mo",output:"≻",tex:"succ",ttype:0},{input:"-<=",tag:"mo",output:"⪯",tex:"preceq",ttype:0},{input:">-=",tag:"mo",output:"⪰",tex:"succeq",ttype:0},{input:"in",tag:"mo",output:"∈",ttype:0},{input:"!in",tag:"mo",output:"∉",tex:"notin",ttype:0},{input:"sub",tag:"mo",output:"⊂",tex:"subset",ttype:0},{input:"sup",tag:"mo",output:"⊃",tex:"supset",ttype:0},{input:"sube",tag:"mo",output:"⊆",tex:"subseteq",ttype:0},{input:"supe",tag:"mo",output:"⊇",tex:"supseteq",ttype:0},{input:"-=",tag:"mo",output:"≡",tex:"equiv",ttype:0},{input:"~=",tag:"mo",output:"≅",tex:"cong",ttype:0},{input:"~",tag:"mo",output:"~",tex:"sim",ttype:0},{input:"~~",tag:"mo",output:"≈",tex:"approx",ttype:0},{input:"prop",tag:"mo",output:"∝",tex:"propto",ttype:0},{input:"complement",tag:"mo",output:"complement",ttype:0},{input:"if",tag:"mtext",output:"if",ttype:6},{input:"otherwise",tag:"mtext",output:"otherwise",ttype:6},{input:"and",tag:"mtext",output:"and",ttype:6},{input:"or",tag:"mtext",output:"or",ttype:6},{input:"not",tag:"mo",output:"¬",tex:"neg",ttype:0},{input:"=>",tag:"mo",output:"⇒",tex:"implies",ttype:0},{input:"<=>",tag:"mo",output:"⇔",tex:"iff",ttype:0},{input:"AA",tag:"mo",output:"∀",tex:"forall",ttype:0},{input:"EE",tag:"mo",output:"∃",tex:"exists",ttype:0},{input:"_|_",tag:"mo",output:"⊥",tex:"bot",ttype:0},{input:"TT",tag:"mo",output:"⊤",tex:"top",ttype:0},{input:"|--",tag:"mo",output:"⊢",tex:"vdash",ttype:0},{input:"|==",tag:"mo",output:"⊨",tex:"models",ttype:0},{input:"(",tag:"mo",output:"(",ttype:4},{input:")",tag:"mo",output:")",ttype:5},{input:"[",tag:"mo",output:"[",ttype:4},{input:"]",tag:"mo",output:"]",ttype:5},{input:"{",tag:"mo",output:"{",tex:"lbrace",ttype:4},{input:"}",tag:"mo",output:"}",tex:"rbrace",ttype:5},{input:"|",tag:"mo",output:"|",ttype:9},{input:"(:",tag:"mo",output:"〈",tex:"langle",ttype:4},{input:":)",tag:"mo",output:"〉",tex:"rangle",ttype:5},{input:"<<",tag:"mo",output:"〈",ttype:4},{input:">>",tag:"mo",output:"〉",ttype:5},{input:"{:",tag:"mo",output:"{:",ttype:4,invisible:!0},{input:":}",tag:"mo",output:":}",ttype:5,invisible:!0},{input:"int",tag:"mo",output:"∫",ttype:0},{input:"oint",tag:"mo",output:"∮",ttype:0},{input:"del",tag:"mo",output:"∂",tex:"partial",ttype:0},{input:"grad",tag:"mo",output:"∇",tex:"nabla",ttype:0},{input:"+-",tag:"mo",output:"±",tex:"pm",ttype:0},{input:"O/",tag:"mo",output:"∅",tex:"varnothing",ttype:0},{input:"oo",tag:"mn",output:"∞",tex:"infty",ttype:0},{input:"aleph",tag:"mo",output:"ℵ",ttype:0},{input:"...",tag:"mo",output:"...",tex:"ldots",ttype:0},{input:":.",tag:"mo",output:"∴",tex:"therefore",ttype:0},{input:":'",tag:"mo",output:"∵",tex:"because",ttype:0},{input:"/_",tag:"mo",output:"∠",tex:"angle",ttype:0},{input:"/_\\",tag:"mo",output:"△",tex:"triangle",ttype:0},{input:"\\ ",tag:"mtext",output:" ",tex:" ",ttype:0},{input:"quad",tag:"mo",output:"  ",tex:"quad",ttype:0},{input:"qquad",tag:"mo",output:"    ",tex:"qquad",ttype:0},{input:"cdots",tag:"mo",output:"⋯",ttype:0},{input:"vdots",tag:"mo",output:"⋮",ttype:0},{input:"ddots",tag:"mo",output:"⋱",ttype:0},{input:"diamond",tag:"mo",output:"⋄",ttype:0},{input:"Lap",tag:"mo",output:"ℒ",tex:"mathscr{L}",ttype:0,notexcopy:!0},{input:"square",tag:"mo",output:"□",ttype:0},{input:"|__",tag:"mo",output:"⌊",tex:"lfloor",ttype:0},{input:"__|",tag:"mo",output:"⌋",tex:"rfloor",ttype:0},{input:"|~",tag:"mo",output:"⌈",tex:"lceil",ttype:0},{input:"~|",tag:"mo",output:"⌉",tex:"rceil",ttype:0},{input:"CC",tag:"mo",output:"ℂ",tex:"mathbb{C}",ttype:0,notexcopy:!0},{input:"NN",tag:"mo",output:"ℕ",tex:"mathbb{N}",ttype:0,notexcopy:!0},{input:"QQ",tag:"mo",output:"ℚ",tex:"mathbb{Q}",ttype:0,notexcopy:!0},{input:"RR",tag:"mo",output:"ℝ",tex:"mathbb{R}",ttype:0,notexcopy:!0},{input:"ZZ",tag:"mo",output:"ℤ",tex:"mathbb{Z}",ttype:0,notexcopy:!0},{input:"'",tag:"mo",output:"′",tex:"^\\prime",ttype:0,nobackslash:!0},{input:"''",tag:"mo",output:"″",ttype:0,tex:"^{\\prime\\prime}",nobackslash:!0},{input:"'''",tag:"mo",output:"‴",ttype:0,tex:"^{\\prime\\prime\\prime}",nobackslash:!0},{input:"!!",tag:"mo",output:"!!",ttype:1,rfunc:!0,nobackslash:!0},{input:"!",tag:"mo",output:"!",ttype:1,rfunc:!0,nobackslash:!0},{input:"f",tag:"mi",output:"f",ttype:1,func:!0,nobackslash:!0},{input:"g",tag:"mi",output:"g",ttype:1,func:!0,nobackslash:!0},{input:"lim",tag:"mo",output:"lim",ttype:7},{input:"sin",tag:"mo",output:"sin",ttype:1,func:!0},{input:"cos",tag:"mo",output:"cos",ttype:1,func:!0},{input:"tan",tag:"mo",output:"tan",ttype:1,func:!0},{input:"sinh",tag:"mo",output:"sinh",ttype:1,func:!0},{input:"cosh",tag:"mo",output:"cosh",ttype:1,func:!0},{input:"tanh",tag:"mo",output:"tanh",ttype:1,func:!0},{input:"cot",tag:"mo",output:"cot",ttype:1,func:!0},{input:"sec",tag:"mo",output:"sec",ttype:1,func:!0},{input:"csc",tag:"mo",output:"csc",ttype:1,func:!0},{input:"arcsin",tag:"mo",output:"arcsin",ttype:1,func:!0},{input:"arccos",tag:"mo",output:"arccos",ttype:1,func:!0},{input:"arctan",tag:"mo",output:"arctan",ttype:1,func:!0},{input:"coth",tag:"mo",output:"coth",ttype:1,func:!0},{input:"sech",tag:"mo",output:"sech",ttype:1,func:!0},{input:"csch",tag:"mo",output:"csch",ttype:1,func:!0},{input:"exp",tag:"mo",output:"exp",ttype:1,func:!0},{input:"log",tag:"mo",output:"log",ttype:1,func:!0},{input:"ln",tag:"mo",output:"ln",ttype:1,func:!0},{input:"det",tag:"mo",output:"det",ttype:1,func:!0},{input:"dim",tag:"mo",output:"dim",ttype:0},{input:"gcd",tag:"mo",output:"gcd",ttype:1,func:!0},{input:"lcm",tag:"mo",output:"lcm",tex:"text{lcm}",ttype:1,func:!0,notexcopy:!0},{input:"min",tag:"mo",output:"min",ttype:7},{input:"max",tag:"mo",output:"max",ttype:7},{input:"Sup",tag:"mo",output:"sup",tex:"text{sup}",ttype:7},{input:"inf",tag:"mo",output:"inf",ttype:7},{input:"mod",tag:"mo",output:"mod",tex:"text{mod}",ttype:0,notexcopy:!0},{input:"sgn",tag:"mo",output:"sgn",tex:"text{sgn}",ttype:1,func:!0,notexcopy:!0},{input:"lub",tag:"mo",output:"lub",ttype:0},{input:"glb",tag:"mo",output:"glb",ttype:0},{input:"abs",tag:"mo",output:"abs",ttype:1,rewriteLR:["|","|"]},{input:"norm",tag:"mo",output:"norm",ttype:1,rewriteLR:["\\|","\\|"]},{input:"floor",tag:"mo",output:"floor",ttype:1,rewriteLR:["\\lfloor","\\rfloor"]},{input:"ceil",tag:"mo",output:"ceil",ttype:1,rewriteLR:["\\lceil","\\rceil"]},{input:"uarr",tag:"mo",output:"↑",tex:"uparrow",ttype:0},{input:"darr",tag:"mo",output:"↓",tex:"downarrow",ttype:0},{input:"rarr",tag:"mo",output:"→",tex:"rightarrow",ttype:0},{input:"->",tag:"mo",output:"→",tex:"to",ttype:0},{input:">->",tag:"mo",output:"↣",tex:"rightarrowtail",ttype:0},{input:"->>",tag:"mo",output:"↠",tex:"twoheadrightarrow",ttype:0},{input:">->>",tag:"mo",output:"⤖",tex:"twoheadrightarrowtail",ttype:0},{input:"|->",tag:"mo",output:"↦",tex:"mapsto",ttype:0},{input:"larr",tag:"mo",output:"←",tex:"leftarrow",ttype:0},{input:"harr",tag:"mo",output:"↔",tex:"leftrightarrow",ttype:0},{input:"rArr",tag:"mo",output:"⇒",tex:"Rightarrow",ttype:0},{input:"lArr",tag:"mo",output:"⇐",tex:"Leftarrow",ttype:0},{input:"hArr",tag:"mo",output:"⇔",tex:"Leftrightarrow",ttype:0},{input:"curvArrLt",tag:"mo",output:"↶",tex:"curvearrowleft",ttype:0},{input:"curvArrRt",tag:"mo",output:"↷",tex:"curvearrowright",ttype:0},{input:"circArrLt",tag:"mo",output:"↺",tex:"circlearrowleft",ttype:0},{input:"circArrRt",tag:"mo",output:"↻",tex:"circlearrowright",ttype:0},{input:"sqrt",tag:"msqrt",output:"sqrt",ttype:1},{input:"root",tag:"mroot",output:"root",ttype:2},{input:"frac",tag:"mfrac",output:"/",ttype:2},{input:"/",tag:"mfrac",output:"/",ttype:3},{input:"_",tag:"msub",output:"_",ttype:3},{input:"^",tag:"msup",output:"^",ttype:3},{input:"stackrel",tag:"mover",output:"stackrel",ttype:2},{input:"overset",tag:"mover",output:"stackrel",ttype:2},{input:"underset",tag:"munder",output:"stackrel",ttype:2},{input:"hat",tag:"mover",output:"^",ttype:1,acc:!0},{input:"widehat",tag:"mover",output:"^",ttype:1,acc:!0},{input:"arc",tag:"mover",output:"⏜",tex:"stackrel{\\frown}",ttype:1,acc:!0},{input:"bar",tag:"mover",output:"¯",tex:"overline",ttype:1,acc:!0},{input:"vec",tag:"mover",output:"→",ttype:1,acc:!0},{input:"tilde",tag:"mover",output:"~",ttype:1,acc:!0},{input:"dot",tag:"mover",output:".",ttype:1,acc:!0},{input:"ddot",tag:"mover",output:"..",ttype:1,acc:!0},{input:"ul",tag:"munder",output:"̲",tex:"underline",ttype:1,acc:!0},{input:"underbrace",tag:"munder",output:"⏟",ttype:15,acc:!0},{input:"overbrace",tag:"mover",output:"⏞",ttype:15,acc:!0},{input:"color",tag:"mstyle",ttype:2},{input:"phantom",tag:"mphantom",ttype:1},{input:"text",tag:"mtext",output:"text",ttype:10},{input:"mbox",tag:"mtext",output:"mbox",ttype:10},{input:'"',tag:"mtext",output:"mbox",ttype:10},{input:"op",tag:"mo",output:"operatorname",tex:"operatorname",ttype:1},{input:"cancel",tag:"menclose",output:"cancel",ttype:1,atname:"notation",atval:"updiagonalstrike"},{input:"bb",tag:"mstyle",atname:"mathvariant",atval:"bold",output:"bb",tex:"mathbf",ttype:1,notexcopy:!0},{input:"mathbf",tag:"mstyle",atname:"mathvariant",atval:"bold",output:"mathbf",ttype:1},{input:"sf",tag:"mstyle",atname:"mathvariant",atval:"sans-serif",output:"sf",tex:"mathsf",ttype:1,notexcopy:!0},{input:"mathsf",tag:"mstyle",atname:"mathvariant",atval:"sans-serif",output:"mathsf",ttype:1},{input:"bbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"bbb",tex:"mathbb",ttype:1,notexcopy:!0},{input:"mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"mathbb",ttype:1},{input:"cc",tag:"mstyle",atname:"mathvariant",atval:"script",output:"cc",tex:"mathcal",ttype:1,notexcopy:!0},{input:"mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",output:"mathcal",ttype:1},{input:"tt",tag:"mstyle",atname:"mathvariant",atval:"monospace",output:"tt",tex:"mathtt",ttype:1,notexcopy:!0},{input:"mathtt",tag:"mstyle",atname:"mathvariant",atval:"monospace",output:"mathtt",ttype:1},{input:"fr",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"fr",tex:"mathfrak",ttype:1,notexcopy:!0},{input:"mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"mathfrak",ttype:1},{input:"bm",tag:"mstyle",atname:"mathvariant",atval:"bold-italic",output:"bm",tex:"boldsymbol",ttype:1},{input:"rm",tag:"mstyle",atname:"mathvariant",atval:"serif",output:"rm",tex:"mathrm",ttype:1},{input:"iint",tag:"mo",output:"∬",ttype:0},{input:"iiint",tag:"mo",output:"∭",ttype:0},{input:"oiint",tag:"mo",output:"∯",ttype:0,nobackslash:!0},{input:"oiiint",tag:"mo",output:"∰",ttype:0,nobackslash:!0},{input:"laplace",tag:"mtext",output:"Δ",tex:"Delta",ttype:0,notexcopy:!0},{input:"==",tag:"mo",output:"══",tex:"xlongequal",ttype:7},{input:"||",tag:"mo",output:"∥",tex:"Vert",ttype:0},{input:"!||",tag:"mo",output:"∦",ttype:0,nobackslash:!0},{input:"S=",tag:"mo",output:"≌",ttype:0,nobackslash:!0},{input:"S~",tag:"mo",output:"∽",ttype:0,nobackslash:!0},{input:"!-=",tag:"mo",output:"≢",tex:"not\\equiv",ttype:0},{input:"!|",tag:"mo",output:"∤",ttype:0,nobackslash:!0},{input:"!sube",tag:"mo",output:"⊈",ttype:0,nobackslash:!0},{input:"!supe",tag:"mo",output:"⊉",ttype:0,nobackslash:!0},{input:"subne",tag:"mo",output:"⊊",ttype:0,nobackslash:!0},{input:"supne",tag:"mo",output:"⊋",ttype:0,nobackslash:!0},{input:"lhd",tag:"mo",output:"⊲",tex:"lhd",ttype:0},{input:"rhd",tag:"mo",output:"⊳",tex:"rhd",ttype:0},{input:"normal",tag:"mo",output:"⊴",tex:"unlhd",ttype:0},{input:"rnormal",tag:"mo",output:"⊵",tex:"unrhd",ttype:0},...asciimath.symbols||[]];const l=/\(|\[|\{/,y=/\)|\]|\}/;function r(t){return i(t=" "===t[0]?t.slice(1):t)?t:"{"+t+"}"}function i(u){if("{"===u[0]&&"}"===u.slice(-1)){let e=0;for(let t=0;t<u.length;++t)if("{"===u[t]?++e:"}"===u[t]&&--e,0===e)return t===u.length-1}}const u={init(){return a()},strip(e){if(e.firstChild&&("mrow"===e.nodeName||"M:MROW"===e.nodeName)){let t=e.firstChild.firstChild;t&&l.test(t.nodeValue)&&e.removeChild(e.firstChild),(t=e.lastChild.firstChild)&&y.test(t.nodeValue)&&e.removeChild(e.lastChild)}return e},consts(t){return g(t.tag,t.output)},leftBracket(t,e){return t.invisible?g("mrow",e):g("mrow",[g("mo",t.output),e])},text(t,e){const u=[];return" "===e[0]&&u.push(p()),u.push(g(t.tag,e))," "===e.slice(-1)&&u.push(p()),g("mrow",u)},directOutput(t){return g(t.tag,t.output)},moOutput(t){return g("mo",t.input)},func(t,e){return g("mrow",[g(t.tag,t.output),e])},unary(t,e,u){if("op"===t.input)return g("mo",s.arg(u));if("sqrt"===t.input)return g(t.tag,e);if(t.rewriteLR)return g("mrow",[g("mo",t.rewriteLR[0]),e,g("mo",t.rewriteLR[1])]);if(t.acc)return g(t.tag,[e,g("mo",t.output)]);const p=g(t.tag,e);return p.setAttribute(t.atname,t.atval),p},binary(t,e,u,p){return"color"===t.input?((node=g(t.tag,u)).setAttribute("mathcolor",s.arg(p)),node):"root"===t.input||"stackrel"===t.output?g(t.tag,[u,e]):"frac"===t.input?g(t.tag,[e,u]):void 0},infixOutput(t){return g("mo",t.output)},space(t){return g("mrow",[p(),g(t.tag,t.output),p()])},leftRight(t,e,u){return"|"===(e.lastChild?e.lastChild.firstChild.nodeValue:"")?g("mrow",[g("mo",t.output),e]):(m.begin=u,g("mo","|"))},rfunc(t,e){return g("mrow",[e,g("mo",t.output)])},infix(t,e,u,p,o,i,n,a){return g("mrow",g(a?"munderover":"msubsup",n?[p,o,i]:[p,i,o]))},infixHalf(t,e,u,p,o,i){return g(o?i?"munder":"msub":i?"mover":"msup",[u,p])},infixFunc(t,e){return g("mrow",[t,e])},placeholder(){return g("mo","□")},infixNode(t,e){return e},push(t,e,u,p){p?e.appendChild(g(t.tag,[u,p])):e.appendChild(u)},matrix(p,o){let e=!1;for(let t=0;t<o.childNodes.length;++t)if(o.childNodes[t].firstChild&&";"===o.childNodes[t].firstChild.nodeValue){e=!0;break}if(e){let t=a(),e=a(),u=a();for(;o.firstChild;){var i=o.firstChild,n=i.firstChild&&i.firstChild.nodeValue;";"===n?(o.removeChild(i),e.appendChild(g("mtd",u)),u=a(),t.appendChild(g("mtr",e)),e=a()):","===n?(o.removeChild(i),e.appendChild(g("mtd",u)),u=a()):u.appendChild(i)}u.firstChild&&e.appendChild(g("mtd",u)),e.firstChild&&t.appendChild(g("mtr",e)),node=g("mtable",t),p.invisible&&(node.setAttribute("columnalign","left"),node.setAttribute("displaystyle","true")),o.appendChild(node)}},closeMatrix(t,e){e.appendChild(g("mo",t.output))},join(t,e){return t}},n={init(){return[]},strip(t){if("{"!==t[0]||"}"!==t.slice(-1))return t;let e=0,u;return t.startsWith("\\left",1)?l.test(t.charAt(6))?e=7:t.startsWith("\\lbrace",6)&&(e=13):"("!==(u=t.charAt(1))&&"["!==u||(e=2),0<e&&("\\right)}"===(u=t.slice(-8))||"\\right]}"===u||"\\right.}"===u?t=r(t.slice(e,-8)):"\\rbrace}"===u&&(t=r(t.slice(e,-14)))),t},consts(t){var e=s.texSymbol(t);return"\\"===e[0]||"mo"===t.tag?e:" "+e},leftBracket(t,e){return/^\\right[.)\]]/.test(e)?(e="."===e[6]?e.slice(7):e.slice(6),t.invisible?r(e):r(s.texCtrl(t)+e)):t.invisible?"{\\left."+e+"}":"{\\left"+s.texCtrl(t)+e+"}"},text(t,e){return(" "===(e=e.replace(/{/g,"\\{").replace(/}/g,"\\}"))[0]?"\\ ":"")+"\\text{"+e+"}"+(" "===e.slice(-1)?"\\ ":"")},directOutput(t){return r(s.texSymbol(t))},moOutput(t){return r(s.texSymbol(t))},func(t,e){return" "+s.texSymbol(t)+r(e)},unary(t,e){return"sqrt"===t.input?"\\sqrt"+r(e):"cancel"===t.input?"\\cancel"+r(e):t.rewriteLR?"\\left"+t.rewriteLR[0]+e+"\\right"+t.rewriteLR[1]:t.atname?"{"+s.texSymbol(t)+r(e)+"}":s.texSymbol(t)+r(e)},binary(t,e,u,p){return"color"===t.input?`{\\color${r(s.arg(p))}${u}}`:"root"===t.input?`\\sqrt[${e}]{${u}}`:"stackrel"===t.output?s.texSymbol(t)+r(e)+r(u):"frac"===t.input?"\\frac"+r(e)+r(u):void 0},infixOutput(t){return t.output},space(t){return"\\quad\\text{"+t.input+"}\\quad"},leftRight(t,e,u){return"|"===e.slice(-1)?"{\\left|"+e+"}":(m.begin=u,"\\mid")},rfunc(t,e){return r(e+t.output)},infix(t,e,u,p,o,i,n,a){return"=="===t.input?n?`\\xlongequal[${o}]`+r(i):`\\xlongequal[${i}]`+r(o):p+e.input+r(o)+u.input+r(i)},infixHalf(t,e,u,p,o,i){return"=="===t.input?u+(o?`[${p}]{}`:r(p)):u+e.input+r(p)},infixFunc(t,e){return r(t+e)},placeholder(){return"{\\square}"},infixNode(t,e){return"=="===t.input?e+"{}":e},push(t,e,u,p){p?(i(u)||(u=r(u)),i(p)||(p=r(p)),e.push("\\frac"+u+p)):e.push(u)},matrix(t,e){let u=!1;const p=e.join("");var o=p.length;let i=0,n=0;for(n=0;n<o;++n)if(l.test(p[n]))++i;else if(y.test(p[n]))--i;else if(";"===p[n]&&0===i){u=!0;break}if(!u)return e[0]=p,void(e.length=1);let a="",r=0,s=[];for(i=0,n=0;n<o;++n)l.test(p[n])?++i:y.test(p[n])?--i:";"===p[n]&&0===i?(s.push(p.slice(r,n)),r=n+1,a+=s.join("&")+"\\\\",s=[]):","===p[n]&&0===i&&(s.push(p.slice(r,n)),r=n+1);r<n&&s.push(p.slice(r,n)),0<s.length&&(a+=s.join("&")+"\\\\"),t.invisible&&"browser"===m.env?e[0]="\\begin{matrix*}[l]"+a+"\\end{matrix*}":e[0]="\\begin{matrix}"+a+"\\end{matrix}",e.length=1},closeMatrix(t,e){e.push("\\right"+s.texCtrl(t))},join(t,e){return 0<m.nestingDepth&&!e&&t.push("\\right."),t.join("")}},s={yields:u,init(t){for(const e of m.define)t=t.replace(e[0],e[1]);m.nestingDepth=0,m.str=t.trimLeft(),m.begin=0},skip(t){for(t&&(m.begin+=t);m.str.charCodeAt(m.begin)<=32;)++m.begin},arg(t){let e;return"{"===m.str[t]?e=m.str.indexOf("}",t+1):"("===m.str[t]?e=m.str.indexOf(")",t+1):"["===m.str[t]&&(e=m.str.indexOf("]",t+1)),-1===e&&(e=m.str.length),m.str.slice(t+1,e)},textArg(t){let e;return"{"===m.str[t]?e=m.str.indexOf("}",t+1):"("===m.str[t]?e=m.str.indexOf(")",t+1):"["===m.str[t]?e=m.str.indexOf("]",t+1):'"'===m.str[t]&&(e=m.str.indexOf('"',t+1)),-1===e&&(e=m.str.length),m.str.slice(t+1,e)},texCtrl(t){return t.tex?"\\"+t.tex:t.input},texSymbol(t){return t.nobackslash?t.tex||t.output:"\\"+(t.tex||t.input)},symbol(){let t,e=m.names,u=m.begin,p=m.str.length;for(;u<p&&(e=e[m.str[u++]]);)e["\0"]&&(t=e["\0"]);if(m.prevSym=m.curSym,t)return m.curSym=t.ttype,t;m.curSym=0;let o,i;var n=m.str.slice(m.begin).match(/^\d+(\.\d+)?/);return i=n?(o=n[0],"mn"):(n=m.str.codePointAt(m.begin),o=isNaN(n)?"":String.fromCodePoint(n),/[a-zA-Z]/.test(o)?"mi":19968<n?"mtext":"mo"),t={input:o,output:o,tag:i,ttype:0,nobackslash:!0},"-"===o&&3===m.prevSym&&(m.curSym=3,t.ttype=1,t.func=!0),t},simple(){let t,e,u,p=s.symbol();if(!p||5===p.ttype&&0<m.nestingDepth)return null;var o=p.input.length;switch(p.ttype){case 7:case 0:return s.skip(o),s.yields.consts(p);case 4:return s.skip(o),++m.nestingDepth,t=s.expr(!0),--m.nestingDepth,s.yields.leftBracket(p,t);case 10:return'"'!=p.input&&s.skip(o),e=s.textArg(m.begin),m.begin+=e.length+2,s.skip(),s.yields.text(p,e);case 15:case 1:return(s.skip(o),u=m.begin,t=s.simple())?p.func?(e=m.str.charAt(u),/\^|_|\/|\||,/.test(e)||1===o&&/\w/.test(p.input)&&"("!=e?(m.begin=u,s.yields.directOutput(p)):s.yields.func(p,t)):(t=s.yields.strip(t),s.yields.unary(p,t,u)):(m.begin=u,s.yields.directOutput(p));case 2:if(s.skip(o),u=m.begin,!(t=s.simple()))return s.yields.moOutput(p);t=s.yields.strip(t);var i=s.simple();return i?(i=s.yields.strip(i),s.yields.binary(p,t,i,u)):s.yields.moOutput(p);case 3:return s.skip(o),s.yields.infixOutput(p);case 6:return s.skip(o),s.yields.space(p);case 9:return s.skip(o),u=m.begin,m.nestingDepth++,t=s.expr(!1),m.nestingDepth--,s.yields.leftRight(p,t,u);default:return s.skip(o),s.yields.directOutput(p)}},infix(){s.skip();var t=s.symbol();let e=s.simple();var u=s.symbol(),p=7===t.ttype||15===t.ttype;if(u.rfunc)return s.skip(u.input.length),s.yields.rfunc(u,e);if(3!==u.ttype||"/"===u.input)return s.yields.infixNode(t,e);s.skip(u.input.length);let o=s.simple();o=o?s.yields.strip(o):s.yields.placeholder();var i,n=s.symbol(),a="_"===u.input,n=(e=n.input===(a?"^":"_")?(s.skip(n.input.length),i=s.simple(),i=s.yields.strip(i),s.yields.infix(t,u,n,e,o,i,a,p)):s.yields.infixHalf(t,u,e,o,a,p),s.symbol());return n.rfunc&&(s.skip(n.input.length),e=s.yields.rfunc(n,e)),e},expr(t){let e=!1,u;var p=s.yields.init();do{s.skip();let t=s.infix(),e=t;"/"===(u=s.symbol()).input&&3===u.ttype?(s.skip(u.input.length),t=(t=s.infix())?s.yields.strip(t):s.yields.placeholder(),e=s.yields.strip(e),s.yields.push(u,p,e,t),u=s.symbol()):e&&s.yields.push(u,p,e)}while((5!==u.ttype&&(9!==u.ttype||t)||0===m.nestingDepth)&&null!=u&&""!=u.output);return 5!==u.ttype&&9!==u.ttype||(s.skip(u.input.length),s.yields.matrix(u,p),u.invisible||(s.yields.closeMatrix(u,p),e=!0)),s.yields.join(p,e)}};function c(t,e){return console.error(t+"\n",e),a("<span>",{className:"katex-error",innerText:"AM parse error"})}function e(e){s.yields=u,s.init(e);let t;try{t=g("mstyle",s.expr(!1))}catch(t){return c(e,t)}return m.color&&t.setAttribute("mathcolor",m.color),m.fontfamily&&t.setAttribute("fontfamily",m.fontfamily),m.displaystyle&&t.setAttribute("displaystyle","true"),t=g("math",t),m.viewsource&&t.setAttribute("title",e),t}let d=e;function x(t,e=m.displaystyle){if(s.yields=n,e&&/\n\n/.test(t))return m.texstr=(u=x,"\\begin{aligned}"+t.split(/\n{2,}/g).map(t=>t.includes("&")?u(t):"& "+u(t)).join(" \\\\ ")+"\\end{aligned}");var u;s.init(t);const p=[];return m.color&&p.push("\\"+m.color),p.push(e?"\\displaystyle ":"\\textstyle "),p.push(s.expr(!1).replace(/(\$|%)/g,"\\$1")),m.texstr=p.join("")}function h(e){let u,t;try{t=x(e),u=a("<span>",t)}catch(t){return c(e,t)}try{katex.render(t,u);const p=u.querySelectorAll("annotation")[0];p.textContent="$"+p.textContent+"$"}catch(t){u.className="katex-error",u.innerText="KaTeX parse error",console.error(e,t)}return u}function f(u){if("math"===u.nodeName||8===u.nodeType||/form|textarea/i.test(u.parentNode.nodeName))return 0;if(0<u.childNodes.length)for(let t=0;t<u.childNodes.length;t++)t+=f(u.childNodes[t]);{var p=u;let t=p.nodeValue;if(!t)return 0;let e=!1;const i=(t=t.replace(m.esc1,()=>(e=!0,"AMesc1"))).split(m.delim1);if(!e&&i.length<=1)return 0;i.length%2==0&&console.warn("formula not closed:",t);const n=a();for(let t=0;t<i.length;++t){var o=i[t].replace(/AMesc1/g,m.delim1);n.appendChild(t%2?d(o):document.createTextNode(o))}return p.parentNode.replaceChild(n,p),i.length-1}}function b(e,t){Array.isArray(t)?t.forEach(t=>e.appendChild(t)):e.appendChild(t)}function a(t,p={},e=[]){var u=t&&t.length;const o=t?"#"===t[0]?document.getElementById(t.slice(1)):"."===t[0]?document.getElementsByClassName(t.slice(1)):"<"===t[0]&&">"===t[u-1]?p.namespace?document.createElementNS(namespace,t.slice(1,u-1)):document.createElement(t.slice(1,u-1)):document.getElementsByTagName(t):document.createDocumentFragment();return"string"==typeof p?o.innerText=p:(Object.keys(p).forEach(t=>{const u=p[t];"className"===t?Array.isArray(u)?u.forEach(t=>o.classList.add(t)):o.classList.add(u):"attrs"===t?Object.keys(u).forEach(t=>o.setAttribute(t,u[t])):"on"===t?Object.keys(u).forEach(t=>{var e=t.split(".");o.addEventListener(e[0],u[t].bind(p),"true"===e[1])}):"style"===t?Object.assign(o.style,u):"function"==typeof u?o[t]=u.bind(p):"namespace"!==t&&(o[t]=u)}),p.el=o),b(o,e),o}function g(t,e=[]){t=document.createElementNS("http://www.w3.org/1998/Math/MathML",t);return b(t,e="string"==typeof e?document.createTextNode(e):e),t}function p(){const t=g("mspace");return t.setAttribute("width","1ex"),t}function t(){if(o.forEach(t=>{t.tex&&!t.notexcopy&&o.push({...t,input:t.tex,tex:void 0,notexcopy:void 0})}),o.forEach(t=>{let e=m.names;t.input.split("").forEach(t=>{e=e[t]=e[t]||Object.create(null)}),e["\0"]=t}),m.delim1.replace(/(\(|\)|\[|\]|\{|\}|\$|\^|\/|\\|\||\.|\*|\+|\?)/g,"\\$1"),m.esc1=new RegExp("\\\\"+m.delim1,"g"),!m.katex&&(e=navigator.userAgent,!/chrome/i.test(e)&&/safari|firefox/i.test(e)))return m.onload();var t,e;if(!1!==m.katex)m.katex=!0,d=h,"browser"===m.env&&(e="https://unpkg.com/katex@0.13.0/dist/katex.min.css",u="sha256-gPJfuwTULrEAAcI3X4bALVU/2qBU+QY/TpoD3GO+Exw=",document.head.appendChild(a("<link>",{attrs:{href:e,rel:"stylesheet",...u?{crossorigin:"anonymous",integrity:u}:{}}})),[u,t=null]=[m.katexpath,m.onload],document.body.appendChild(a("<script>",{src:u,onload:t})));else{var u=a("<button>",{innerText:"×",style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"transparent",cursor:"pointer"},onclick(){p.style.display="none"}});const p=a("<div>",{id:"AMnotify",style:{position:"absolute",top:"0",left:"0",right:"0",textAlign:"center",padding:"0.5em 2em",background:"#f99",fontFamily:"sans-serif",color:"#633"},innerHTML:'To view the ASCIIMathML notation, use lastest version of Mozilla Firefox or Safari.To support other browsers, please include <a href="https://katex.org">katex.min.js</a>.'},u);document.body.append(p)}}"undefined"==typeof document?(m.env="nodejs",m.katex=!0,m.displaystyle=!0,m.define.push([/&#(x?[0-9a-fA-F]+);/g,(t,e)=>String.fromCodePoint("x"===e[0]?"0"+e:e)]),t()):"undefined"!=typeof chrome&&chrome.extension?(m.env="extension",m.katex=!0,m.displaystyle=!0,t()):"undefined"!=typeof Word?m.env="word":(m.env="browser",window.addEventListener("load",t,!1)),m.render=f,m.am2tex=x,m.am2mathml=e,m.init=t}(),"undefined"!=typeof module&&(module.exports=asciimath);
